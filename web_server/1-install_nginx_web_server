#!/usr/bin/env bash
# Install nginx, configure it to serve "Holberton School for the win!" on port 80 and restart without systemctl

# Update package list and install nginx
apt-get update -y
apt-get install -y nginx

# Overwrite default index.html with the required content
echo "Holberton School for the win!" > /var/www/html/index.html

# Make sure permissions are correct
chown www-data:www-data /var/www/html/index.html
chmod 644 /var/www/html/index.html

# Start nginx service (use service command since systemctl is not allowed)
service nginx start

# In case nginx is already running, reload configuration
service nginx reload || service nginx restart

# Check nginx status, print errors if any (optional)
if ! service nginx status > /dev/null; then
    echo "Nginx failed to start"
    exit 1
fi
